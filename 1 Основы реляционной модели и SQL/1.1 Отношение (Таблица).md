# Основные понятия реляционных баз данных 

**Основные принципы реляционных баз данных:**

- все данные на концептуальном уровне представляются в виде объектов, заданных **в виде строк и столбцов**, называемых  
**отношением**, более распространенное название – **таблица**;  

- в пересечение строки и столбца таблицы можно занести только одно значение;  

- все операции выполняются над целыми отношениями и результатом этих операций является отношение.  

![Table](img/Table.jpg)

- **отношение** – это структура данных целиком, набор записей (в обычном понимании – таблица), в примере – 
это `Сотрудник`;  

- **кортеж** – это каждая строка, содержащая данные (более распространенный термин – запись ), например,  
<`001, Борин С.А, 234-01-23, программист`>, все кортежи в отношении должны быть различны;  

- **мощность** – число кортежей в таблице (проще говоря, число записей), в данном случае 3, мощность отношения может  
быть любой (от 0 до бесконечности), порядок следования кортежей - неважен;  

- **атрибут** – это столбец в таблице (более распространенный термин – поле ), в примере – `Табельный номер`,  
`Фамилия И.О.`, `Телефон`, `Должность`);  

- **размерность** – это число атрибутов в таблице, в данном случае – 4;  

- размерность отношения должна быть больше 0, порядок следования атрибутов существенен;  

- **домен атрибута** – это допустимые значения (неповторяющиеся), которые можно занести в поле, например для атрибута  
`Должность домен` – {инженер, программист}.
<br>  

**Правила именования таблиц**:

- может включать английские буквы, цифры и знак подчеркивания, должно начинаться с буквы; 

- имя должно быть уникальным в пределах базы данных.

Также **рекомендуется**:

- чтобы имя было существительным в единственном числе;  

- имя должно быть понятным и соответствовать тому объекту, который оно описывает;  

- имя должно быть как можно короче, максимум до 10 символов.  

**Правила именования полей**:

- может включать английские буквы, цифры и знак подчеркивания, должно начинаться с буквы;

- имя поля должно быть уникальным в пределах таблицы.

Также **рекомендуется**:

- имя должно быть понятным и соответствовать тем данным, которые хранятся в поле;

- имя может состоять из нескольких слов, тогда слова разделяются подчеркиванием, после подчеркивания слово пишется с  
маленькой буквы.

Рекомендации по именованию **ключевых полей**:

- имя должно состоять из двух частей: начинаться с названия таблицы, которой поле принадлежит, затем через 
подчеркивание необходимо указать id.

### Основные типы данных SQL:

- `INT`, `INTEGER` - Целое число, могут принимать значения от -2 147 483 648 до 2 147 483 647(`-567`, `1205`);
- `DECIMAL`, `NUMERIC` - Вещественное число, в скобках указывается максимальная длина числа (включает символы слева и  
справа от десятичной запятой) и количество знаков после запятой. Можно использовать оба этих типа, они эквивалентны, 
принимают значения в диапазоне -1038+1 до 1038-1. `DECIMAL(4,1)`, `NUMERIC(6,3)`. (`34.6`, `-3.294`);  
- `DATE` - Дата в формате ГГГГ-ММ-ДД, `26 июля 2020 года`, `3 января 2021 года`. (`2020-07-26`, `2021-01-03`);
- `VARCHAR` - Строка длиной не более 255 символов, в скобках указывается максимальная длина строки, которая может  
храниться в поле `VARCHAR(10)`(рассматриваются однобайтовые кодировки, для которых число в скобках соответствует  
максимальному количеству символов в строке).(`пример описание`)\

_**Рекомендации по выбору типов данных для полей таблицы:**_

- Выбирайте минимальный тип данных исходя из максимального значения поля. Например, если максимальный текст, который  
может быть записан в поле, имеет длину 25 символов, значит нужно использовать тип `VARCHAR(25)`; 

- Для описания ключевого поля используйте описание `INT PRIMARY KEY AUTO_INCREMENT`. Это значит, что в поле будут  
заноситься различные целые числа, при этом они будут автоматически генерироваться (каждая следующая строка будет иметь  
значение ключа на 1 больше предыдущего).

### Создание таблицы

| book_id | title |           author           |  price  | amount |  
|:-------:|:-----:|:--------------------------:|:-------:|:------:|
|    1    |Мастер и Маргарита	| Булгаков М.А. | 670.99 |   3    |  
|   2	    |Белая гвардия	 |       Булгаков М.А.        |	540.50 |   5    |
|   3	    |Идиот	 |      Достоевский Ф.М.      |	460	|   10   |
|   4	    | Братья Карамазовы | 	Достоевский Ф.М. | 799.01 |   2    | 

- **book_id** - ключевой столбец, целое число, генерируется автоматически  - I`NT PRIMARY KEY AUTO_INCREMENT`;
- **title** - строка текста, ее длина выбирается в зависимости от данных, которые предполагается хранить в поле,  
предположим, что название книги не превышает 50 символов - `VARCHAR(50)`;
- **author** - строка текста - `VARCHAR(30)`;
- **priсe** - денежное значения используется числовой тип данных с двумя знаками после запятой - `DECIMAL(8,2)`;
- **amount** - целое число - `INT`.

```sql
CREATE TABLE book(
    book_id  INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(50),
    author VARCHAR(30),
    price DECIMAL(8,2),
    amount INT
);
```

Для просмотра таблицы используется запрос:
```sql
SELECT * FROM book;
```

### Вставка записи в таблицу

Для занесения новой записи в таблицу используется SQL запрос, в котором указывается в какую таблицу, в какие поля  
заносить новые значения. Структура запроса:

- ключевые слова `INSERT INTO` (ключевое слово INTO можно пропустить);
- **имя** таблицы, в которую добавляется запись;
- открывающая круглая скобка «`(`»;
- **список полей** через запятую, в которые следует занести новые данные;
- закрывающая скобка «`)`»;
- ключевое слово `VALUES`;
- открывающая круглая скобка «`(`»;
- **список значений** через запятую, которые заносятся в соответствующие поля, при этом текстовые значения заключаются  
в кавычки, числовые значения записываются без кавычек, в качестве разделителя целой и дробной части используется точка;
- закрывающая скобка «`)`».

При добавлении учитывается следующее:

1. **количество полей** и **количество значений** в списках должны **совпадать**;
2. должно существовать прямое соответствие между позицией одного и того же элемента в обоих списках, поэтому первый  
элемент списка значений должен относиться к первому столбцу в списке столбцов, второй – ко второму столбцу и т.д.;
3. **типы** данных элементов в списке значений должны быть совместимы с **типами** данных соответствующих столбцов таблицы  
(целое число можно занести в поле типа DECIMAL, обратная операция - недопустима);
4. **новые** значения **нельзя** добавлять в поля, описанные как `PRIMARY KEY AUTO_INCREMENT`;
5. _рекомендуется_ заполнять все поля записи, если же поле пропущено, значение этого поля зависит от установленных по  
умолчанию значений, если значения не установлены - на данной платформе вставляется пустое значение (`NULL`).

```sql
INSERT INTO book (title, author, price, amount) VALUES
('Белая гвардия', 'Булгаков М.А.', 540.50 , 5),
('Идиот', 'Достоевский Ф.М.', 460, 10),
('Братья Карамазовы', 'Достоевский Ф.М.', 799.01, 2);

SELECT * FROM book;
```